document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".wp-block-telex-block-x-marks-the-spot").forEach(function(t){t.querySelector(".interactive-hotspots-image-wrapper");const e=t.querySelector("img"),n=t.querySelectorAll(".hotspot");let o=null,a=null,s=null,i=0,r=!1,c=!1;const l="ontouchstart"in window||navigator.maxTouchPoints>0;function d(){a||(a={width:e.naturalWidth,height:e.naturalHeight,aspectRatio:e.naturalWidth/e.naturalHeight})}function u(){if(!a||!e)return;const t=e.getBoundingClientRect(),o=t.width,s=t.height;let i,r,c=0,l=0;o/s>a.aspectRatio?(r=s,i=r*a.aspectRatio,c=(o-i)/2):(i=o,r=i/a.aspectRatio,l=(s-r)/2),n.forEach(t=>{const e=parseFloat(t.dataset.x||"50"),n=parseFloat(t.dataset.y||"50"),a=(c+i*e/100)/o*100,d=(l+r*n/100)/s*100;t.style.left=a+"%",t.style.top=d+"%"})}let p;function f(t){t.preventDefault(),c=!0,i=Date.now(),r=!1;const e=t.currentTarget;e.style.transform=e.style.transform.replace("scale(1)","")+" scale(0.95)"}function h(t){t.preventDefault(),r=!0;const e=t.currentTarget;e.style.transform=e.style.transform.replace(" scale(0.95)","")}function m(t){t.preventDefault();const e=Date.now()-i,n=t.currentTarget;n.style.transform=n.style.transform.replace(" scale(0.95)",""),!r&&e<500&&x(t),c=!1}function g(t){t.preventDefault();const e=t.currentTarget;e.style.transform=e.style.transform.replace(" scale(0.95)",""),c=!1,r=!0}function v(t){if(c)return;const e=t.currentTarget,n=e.dataset.content||"";n&&E(e,n)}function y(t){c||L()}function w(t){c||(t.preventDefault(),x(t))}function x(t){t&&(t.preventDefault(),t.stopPropagation());const e=t.currentTarget,n=e.dataset.content||"";if(n){if(o&&o.dataset.hotspotId===e.dataset.id)return void L();E(e,n),clearTimeout(s),s=setTimeout(()=>{L()},l?4e3:3e3)}}function E(t,e){L();const n=document.createElement("div");n.className="hotspot-tooltip",n.innerHTML=e,n.dataset.hotspotId=t.dataset.id,l&&(n.style.fontSize="clamp(12px, 3vw, 14px)",n.style.padding="0.75rem",n.style.maxWidth="clamp(150px, 50vw, 200px)",n.style.lineHeight="1.4"),document.body.appendChild(n),o=n;const a=t.getBoundingClientRect(),s=n.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight,c=window.scrollY,d=window.scrollX;let u=a.left+d+a.width/2-s.width/2,p=a.top+c-s.height-5;const f=l?15:10;u<f?u=f:u+s.width>i-f&&(u=i-s.width-f);const h=l?20:10;if(p<c+h&&(p=a.bottom+c+5,n.classList.add("below")),p+s.height>c+r-h&&(p=c+r-s.height-h),n.style.left=u+"px",n.style.top=p+"px",n.style.opacity="0",n.style.transform="translateY(5px) scale(0.95)",n.style.transition="opacity 0.2s ease, transform 0.2s ease",setTimeout(()=>{n.parentNode&&(n.style.opacity="1",n.style.transform="translateY(0) scale(1)")},10),l){const t=document.createElement("button");t.innerHTML="Ã—",t.className="tooltip-close",t.style.cssText="\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: -5px;\n\t\t\t\t\tright: -5px;\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tbackground: rgba(255,255,255,0.9);\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tbox-shadow: 0 1px 3px rgba(0,0,0,0.3);\n\t\t\t\t",t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),L()}),n.appendChild(t)}}function L(){clearTimeout(s),o&&(o.remove(),o=null)}e.complete?(d(),u()):e.addEventListener("load",function(){d(),u()}),n.forEach(t=>{t.addEventListener("touchstart",f,{passive:!1}),t.addEventListener("touchmove",h,{passive:!1}),t.addEventListener("touchend",m,{passive:!1}),t.addEventListener("touchcancel",g,{passive:!1}),l||(t.addEventListener("mouseenter",v),t.addEventListener("mouseleave",y),t.addEventListener("click",w)),t.addEventListener("keydown",function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),x(t))}),t.setAttribute("tabindex","0")}),window.addEventListener("resize",function(){clearTimeout(p),p=setTimeout(()=>{u(),L()},100)}),window.addEventListener("orientationchange",function(){setTimeout(()=>{u(),L()},200)}),document.addEventListener("touchstart",function(t){t.target.closest(".hotspot")||t.target.closest(".hotspot-tooltip")||L()},{passive:!0}),document.addEventListener("click",function(t){l||t.target.closest(".hotspot")||t.target.closest(".hotspot-tooltip")||L()}),window.addEventListener("scroll",L,{passive:!0})})});