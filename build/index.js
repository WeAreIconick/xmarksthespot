(()=>{"use strict";var e,t={737:()=>{const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.blockEditor,s=window.wp.components,l=window.wp.element,i=window.wp.primitives,a=window.ReactJSXRuntime,n=(0,a.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(i.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),r=(0,a.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),p=(0,a.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(i.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),c=JSON.parse('{"UU":"telex/block-x-marks-the-spot"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:i}){const{imageId:c,imageUrl:h,imageAlt:d,hotspots:x,hotspotStyle:m,hotspotColor:k,hotspotSize:u,animation:w}=e,[b,_]=(0,l.useState)(!1),[v,g]=(0,l.useState)(null),[j,f]=(0,l.useState)({}),y=(0,l.useRef)(),C=e=>{i({imageId:e.id,imageUrl:e.url,imageAlt:e.alt})},S=e=>{f({...e}),g(e.id),_(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.InspectorControls,{children:[(0,a.jsxs)(s.PanelBody,{title:(0,t.__)("Image Settings","x-marks-the-spot-block-wp"),children:[(0,a.jsx)(o.MediaUploadCheck,{children:(0,a.jsx)(o.MediaUpload,{onSelect:C,allowedTypes:["image"],value:c,render:({open:e})=>(0,a.jsx)(s.Button,{onClick:e,variant:"primary",style:{marginBottom:"16px"},children:h?(0,t.__)("Replace Image","x-marks-the-spot-block-wp"):(0,t.__)("Select Image","x-marks-the-spot-block-wp")})})}),h&&(0,a.jsx)(s.TextControl,{label:(0,t.__)("Alt Text","x-marks-the-spot-block-wp"),value:d||"",placeholder:(0,t.__)("Describe the image for screen readers","x-marks-the-spot-block-wp"),onChange:e=>i({imageAlt:e})})]}),(0,a.jsxs)(s.PanelBody,{title:(0,t.__)("Hotspot Appearance","x-marks-the-spot-block-wp"),children:[(0,a.jsx)(s.SelectControl,{label:(0,t.__)("Hotspot Style","x-marks-the-spot-block-wp"),value:m,options:[{label:(0,t.__)("Pulsing Dot","x-marks-the-spot-block-wp"),value:"pulse-dot"},{label:(0,t.__)("Plus Sign","x-marks-the-spot-block-wp"),value:"plus"},{label:(0,t.__)("Circle","x-marks-the-spot-block-wp"),value:"circle"},{label:(0,t.__)("Numbered","x-marks-the-spot-block-wp"),value:"numbered"}],onChange:e=>i({hotspotStyle:e})}),(0,a.jsx)(s.BaseControl,{label:(0,t.__)("Hotspot Color","x-marks-the-spot-block-wp"),children:(0,a.jsx)(s.ColorPicker,{color:k,onChange:e=>i({hotspotColor:e})})}),(0,a.jsx)(s.RangeControl,{label:(0,t.__)("Hotspot Size","x-marks-the-spot-block-wp"),value:u,onChange:e=>i({hotspotSize:e}),min:10,max:50}),(0,a.jsx)(s.ToggleControl,{label:(0,t.__)("Enable Animation","x-marks-the-spot-block-wp"),checked:w,onChange:e=>i({animation:e})})]}),x.length>0&&(0,a.jsx)(s.PanelBody,{title:(0,t.__)("Hotspot List","x-marks-the-spot-block-wp"),children:x.map((e,o)=>(0,a.jsxs)(s.Flex,{justify:"space-between",align:"center",children:[(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)("strong",{children:e.title||(0,t.__)("Untitled Hotspot","x-marks-the-spot-block-wp")})}),(0,a.jsxs)(s.FlexItem,{children:[(0,a.jsx)(s.Button,{icon:n,onClick:()=>S(e),size:"small",label:(0,t.__)("Edit Hotspot","x-marks-the-spot-block-wp")}),(0,a.jsx)(s.Button,{icon:r,onClick:()=>{return t=e.id,void i({hotspots:x.filter(e=>e.id!==t)});var t},size:"small",isDestructive:!0,label:(0,t.__)("Delete Hotspot","x-marks-the-spot-block-wp")})]})]},e.id))}),(0,a.jsxs)(s.PanelBody,{title:(0,t.__)("Powered by Telex","x-marks-the-spot-block-wp"),initialOpen:!1,children:[(0,a.jsx)("p",{style:{marginBottom:"12px"},children:(0,t.__)("Telex is basically the J.A.R.V.I.S of WordPress development - an AI that builds blocks so you don't have to.","x-marks-the-spot-block-wp")}),(0,a.jsx)(s.ExternalLink,{href:"https://telex.automattic.ai",children:(0,t.__)("Learn more about Telex","x-marks-the-spot-block-wp")})]})]}),(0,a.jsxs)("div",{...(0,o.useBlockProps)(),children:[h?(0,a.jsxs)("div",{className:"interactive-hotspots-container",children:[(0,a.jsxs)("div",{className:"interactive-hotspots-image-wrapper",onClick:e=>{if(!h)return;const t=e.target.getBoundingClientRect(),o=(e.clientX-t.left)/t.width*100,s=(e.clientY-t.top)/t.height*100,l={id:Date.now(),x:Math.round(100*o)/100,y:Math.round(100*s)/100,title:"",content:"",type:"tooltip"};f(l),g(l.id),_(!0)},style:{position:"relative",display:"inline-block",cursor:"crosshair"},children:[(0,a.jsx)("img",{ref:y,src:h,alt:d,style:{maxWidth:"100%",height:"auto",display:"block"}}),x.map(e=>{const o={position:"absolute",left:`${e.x}%`,top:`${e.y}%`,width:`${u}px`,height:`${u}px`,backgroundColor:k,border:"2px solid white",borderRadius:"circle"===m?"50%":"square"===m?"0":"50%",cursor:"pointer",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10};return w&&"pulse-dot"===m&&(o.animation="hotspot-pulse 2s infinite"),(0,a.jsxs)("div",{style:o,onClick:t=>{t.stopPropagation(),S(e)},onMouseDown:t=>{t.preventDefault();const o=t=>{((e,t)=>{if(!y.current)return;const o=y.current.getBoundingClientRect(),s=(t.clientX-o.left)/o.width*100,l=(t.clientY-o.top)/o.height*100,a=x.map(t=>t.id===e?{...t,x:Math.max(0,Math.min(100,s)),y:Math.max(0,Math.min(100,l))}:t);i({hotspots:a})})(e.id,t)},s=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)},title:(0,t.__)("Click to edit, drag to move","x-marks-the-spot-block-wp"),children:["plus"===m&&"+","numbered"===m&&x.indexOf(e)+1,("pulse-dot"===m||"circle"===m)&&""]},e.id)})]}),0===x.length&&(0,a.jsx)("p",{className:"interactive-hotspots-help",children:(0,t.__)("Click anywhere on the image to add a hotspot.","x-marks-the-spot-block-wp")})]}):(0,a.jsxs)("div",{className:"interactive-hotspots-placeholder",children:[(0,a.jsx)(o.MediaUploadCheck,{children:(0,a.jsx)(o.MediaUpload,{onSelect:C,allowedTypes:["image"],value:c,render:({open:e})=>(0,a.jsx)(s.Button,{onClick:e,variant:"primary",icon:p,children:(0,t.__)("Select Image for Hotspots","x-marks-the-spot-block-wp")})})}),(0,a.jsx)("p",{children:(0,t.__)("Upload an image and click on it to add interactive hotspots.","x-marks-the-spot-block-wp")})]}),b&&(0,a.jsx)(s.Modal,{title:v&&x.find(e=>e.id===v)?(0,t.__)("Edit Hotspot","x-marks-the-spot-block-wp"):(0,t.__)("Add New Hotspot","x-marks-the-spot-block-wp"),onRequestClose:()=>_(!1),size:"medium",className:"hotspot-edit-modal",children:(0,a.jsxs)("div",{className:"hotspot-modal-content",style:{padding:"20px"},children:[(0,a.jsx)(s.TextControl,{label:(0,t.__)("Hotspot Title","x-marks-the-spot-block-wp"),value:j.title||"",placeholder:(0,t.__)("Enter a short title for this hotspot","x-marks-the-spot-block-wp"),onChange:e=>f({...j,title:e}),help:(0,t.__)("A short title for your hotspot","x-marks-the-spot-block-wp")}),(0,a.jsx)(s.TextareaControl,{label:(0,t.__)("Hotspot Content","x-marks-the-spot-block-wp"),value:j.content||"",onChange:e=>f({...j,content:e}),placeholder:(0,t.__)("Enter your hotspot content here. This will appear as a tooltip when users hover over the hotspot...","x-marks-the-spot-block-wp"),help:(0,t.__)("The content that will appear when users hover over this hotspot. Keep it concise for better tooltip display.","x-marks-the-spot-block-wp"),rows:6,style:{width:"100%"}}),(0,a.jsx)(s.__experimentalSpacer,{}),(0,a.jsxs)(s.Flex,{justify:"flex-end",gap:"2",children:[(0,a.jsx)(s.Button,{variant:"secondary",onClick:()=>_(!1),children:(0,t.__)("Cancel","x-marks-the-spot-block-wp")}),(0,a.jsx)(s.Button,{variant:"primary",onClick:()=>{const e=v&&x.find(e=>e.id===v)?x.map(e=>e.id===v?j:e):[...x,j];i({hotspots:e}),_(!1),g(null),f({})},disabled:!j.title,children:(0,t.__)("Save Hotspot","x-marks-the-spot-block-wp")})]})]})})]})]})}})}},o={};function s(e){var l=o[e];if(void 0!==l)return l.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,s),i.exports}s.m=t,e=[],s.O=(t,o,l,i)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,l,i]=e[c],n=!0,r=0;r<o.length;r++)(!1&i||a>=i)&&Object.keys(s.O).every(e=>s.O[e](o[r]))?o.splice(r--,1):(n=!1,i<a&&(a=i));if(n){e.splice(c--,1);var p=l();void 0!==p&&(t=p)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,l,i]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var l,i,[a,n,r]=o,p=0;if(a.some(t=>0!==e[t])){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(r)var c=r(s)}for(t&&t(o);p<a.length;p++)i=a[p],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},o=globalThis.webpackChunkx_marks_the_spot=globalThis.webpackChunkx_marks_the_spot||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var l=s.O(void 0,[350],()=>s(737));l=s.O(l)})();